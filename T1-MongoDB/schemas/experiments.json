{
  "$jsonSchema": {
    "bsonType": "object",
    "required": ["experiment_id", "title", "type", "date", "status", "researcher_id", "sample_ids"],
    "properties": {
      "_id": {
        "bsonType": "objectId",
        "description": "Identificador único de MongoDB"
      },
      "experiment_id": {
        "bsonType": "string",
        "description": "ID único del experimento (ej: EXP_001)"
      },
      "title": {
        "bsonType": "string",
        "description": "Título descriptivo del experimento"
      },
      "type": {
        "bsonType": "string",
        "description": "Tipo de experimento (RNA-seq, ChIP-seq, etc.)"
      },
      "date": {
        "bsonType": "date",
        "description": "Fecha de realización del experimento"
      },
      "status": {
        "bsonType": "string",
        "enum": ["pending", "in_progress", "completed", "failed"],
        "description": "Estado actual del experimento"
      },
      "methodology": {
        "bsonType": "object",
        "description": "Nivel 2: Metadata del experimento",
        "properties": {
          "platform": {
            "bsonType": "string",
            "description": "Plataforma de secuenciación (ej: Illumina NovaSeq)"
          },
          "library_prep": {
            "bsonType": "string",
            "description": "Método de preparación de librería"
          },
          "sequencing_params": {
            "bsonType": "object",
            "description": "Nivel 3: Parámetros técnicos de secuenciación",
            "properties": {
              "read_length": {
                "bsonType": "int",
                "description": "Longitud de lectura en pares de bases"
              },
              "coverage": {
                "bsonType": "string",
                "description": "Cobertura de secuenciación (ej: 30X)"
              },
              "quality_control": {
                "bsonType": "object",
                "description": "Nivel 4: Métricas de control de calidad",
                "properties": {
                  "q30_percentage": {
                    "bsonType": "double",
                    "description": "Porcentaje de bases con calidad Q30 o superior"
                  },
                  "adapter_contamination": {
                    "bsonType": "double",
                    "description": "Porcentaje de contaminación por adaptadores"
                  },
                  "duplication_rate": {
                    "bsonType": "double",
                    "description": "Tasa de duplicación de lecturas"
                  }
                }
              }
            }
          }
        }
      },
      "researcher_id": {
        "bsonType": "objectId",
        "description": "Referencia al investigador principal → colección researchers"
      },
      "sample_ids": {
        "bsonType": "array",
        "description": "Referencias a las muestras utilizadas → colección samples",
        "items": {
          "bsonType": "objectId"
        }
      },
      "publication_ids": {
        "bsonType": "array",
        "description": "Referencias a publicaciones asociadas → colección publications",
        "items": {
          "bsonType": "objectId"
        }
      }
    }
  }
}